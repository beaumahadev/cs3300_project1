<html>

<head>
<script src="https://d3js.org/d3.v4.min.js"></script>
<style>
body { font-family: 'Crimson Text', Calibri, sans-serif; }
svg { border: solid #ccc 1px; }
path.lineGraph { fill: none; stroke-width: 2; }
</style>
</head>

	<body>

		<svg height="400" width="400"></svg>
		<script id = "Load Data">
			//All the code for loading from our tsv into arrys

			var satisfactionDict;
			var sleepDict;
			var incomeDict;

			//creates a dictionary from given tsv given the colomn for the keys and the colomn for the values
			function createDataDict(tsv, col_key, col_value){ 
				var dict={};
				var newfunction= function(tsv, col_key, col_value){
					d3.tsv(tsv, function (error, data) {
					data.forEach(function(d) {
						var headings=Object.keys(d);
						dict[d[(headings[col_key])]]=d[(headings[col_value])];
					});
				});
					return dict;
				};
				return newfunction;
			}


			satisfactionDict=createDataDict()("hapiness.tsv",1,2);
			sleepDict=createDataDict()("sleep.tsv",0,1);
			incomeDict=createDataDict()("income.tsv",6,4);


			  setTimeout(function() {
			    buildViz();
			  }, 250);

			


			//create the visulization 
			function buildViz(){


				console.log(JSON.stringify(sleepDict));
				console.log(JSON.stringify(incomeDict));
				console.log(JSON.stringify(satisfactionDict));
				console.log(satisfactionDict.Utah);

				var svg = d3.select("svg");
				for (var i=0; i < sleepDict.length;i++){}
				svg.append("circle")
				//.attr("cx", Number(sleepDict[key]))
				//.attr("cx",Number(sleepDict[key]))
				.attr("r", 3);
			}
			
			

		</script>

</body>
</html>